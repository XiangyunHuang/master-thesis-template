本文会用到比较多的空间数据分析的R包，故而拉取 `rocker/geospatial` 镜像，省却许多安装配置的麻烦，

```bash
docker run -d -p 8787:8787 -e ROOT=TRUE \
-e USER=xiangyun -e PASSWORD=cloud \
rocker/geospatial
```

安装依赖的中文 TeX 包

```bash
tlmgr install ctex ms ulem xecjk environ trimspaces \
zhnumber fandol xltxtra realscripts
```

或者

```r
tinytex::tlmgr(
     c('option', 'repository', 'https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet')
 )
TeXpkgs <- c('ctex', 'ms', 'ulem', 'xecjk', 'environ',
             'trimspaces', 'zhnumber', 'fandol', 'xltxtra', 'realscripts')
tinytex::tlmgr_install(TeXpkgs)
```


编译所依赖的R包

```{r}
sessionInfo()
```

docker 内完整的 R 包列表如下：

```{r}
# list.files(.libPaths())
```


- 日常编辑在 CentOS 下，通过 RStudio Connect 传上去，在线预览访问这 <https://bookdown.org/xiangyun/master-thesis-template/>

- 通过 netlify 部署，可以访问这 <https://cumtb-thesis-template.netlify.com/>

- 以后的工作环境可能是 docker ，镜像拉取自 `rocker/geospatial`，这环境和 <https://travis-ci.org> 提供的环境比较接近，前者是 Debian ，后者是 Ubuntu， 且都是虚拟的

启动 docker 程序

![启动docker](figures/start_docker.png)

拉取镜像

![拉取镜像](figures/pull_image.png)

![镜像准备完毕](figures/pull_down.png)